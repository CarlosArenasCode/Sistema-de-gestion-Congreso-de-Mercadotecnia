<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Generaci√≥n Autom√°tica de Constancias - Vista General</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            background: white;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
        }
        
        h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.2em;
        }
        
        .status-badge {
            display: inline-block;
            background: #10b981;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            margin-top: 15px;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .card h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.5em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        
        .feature {
            display: flex;
            align-items: start;
            margin-bottom: 12px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .feature-icon {
            color: #10b981;
            font-size: 1.2em;
            margin-right: 10px;
            font-weight: bold;
        }
        
        .timeline {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .timeline h2 {
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .timeline-item {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
        }
        
        .timeline-number {
            background: #667eea;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            flex-shrink: 0;
            margin-right: 15px;
        }
        
        .timeline-content {
            flex: 1;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
        }
        
        .timeline-content strong {
            color: #667eea;
        }
        
        .code-block {
            background: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        .code-block .comment {
            color: #5c6370;
        }
        
        .code-block .command {
            color: #61afef;
        }
        
        .code-block .string {
            color: #98c379;
        }
        
        .example-output {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            font-family: monospace;
            font-size: 0.9em;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5568d3;
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-success:hover {
            background: #0ea370;
        }
        
        .btn-secondary {
            background: #6b7280;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #4b5563;
        }
        
        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .alert-info {
            background: #dbeafe;
            border-left: 4px solid #3b82f6;
            color: #1e40af;
        }
        
        .alert-success {
            background: #d1fae5;
            border-left: 4px solid #10b981;
            color: #065f46;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        footer {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéì Sistema de Generaci√≥n Autom√°tica de Constancias</h1>
            <p class="subtitle">Congreso de Mercadotecnia - Universidad Aut√≥noma de Aguascalientes</p>
            <span class="status-badge">‚úÖ SISTEMA COMPLETAMENTE IMPLEMENTADO</span>
        </header>
        
        <div class="alert alert-success">
            <strong>‚úÖ ¬°Sistema Operacional!</strong> Las constancias se generan autom√°ticamente cuando los eventos finalizan. 
            No se requiere intervenci√≥n manual.
        </div>
        
        <div class="timeline">
            <h2>üîÑ Flujo Autom√°tico del Sistema</h2>
            
            <div class="timeline-item">
                <div class="timeline-number">1</div>
                <div class="timeline-content">
                    <strong>Evento Finaliza</strong><br>
                    El evento alcanza su hora_fin programada (ejemplo: 14:00 hrs)
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-number">2</div>
                <div class="timeline-content">
                    <strong>Espera de Seguridad (30 min)</strong><br>
                    Sistema espera para asegurar que todos registraron su salida
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-number">3</div>
                <div class="timeline-content">
                    <strong>Tarea Programada Ejecuta</strong><br>
                    Windows Task Scheduler ejecuta cada 15 minutos (configurable)
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-number">4</div>
                <div class="timeline-content">
                    <strong>Detecci√≥n de Eventos</strong><br>
                    Script busca eventos finalizados con genera_constancia = 1
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-number">5</div>
                <div class="timeline-content">
                    <strong>B√∫squeda de Usuarios Elegibles</strong><br>
                    Identifica usuarios con asistencia completa (entrada Y salida)
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-number">6</div>
                <div class="timeline-content">
                    <strong>Generaci√≥n de PDFs</strong><br>
                    Crea constancia individual con QR code para cada usuario
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-number">7</div>
                <div class="timeline-content">
                    <strong>Almacenamiento</strong><br>
                    Guarda PDFs en constancias_pdf/ y registra en base de datos
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="timeline-number">8</div>
                <div class="timeline-content">
                    <strong>Disponible para Descarga</strong><br>
                    Usuario puede descargar desde su panel: "Mis Constancias"
                </div>
            </div>
        </div>
        
        <div class="stats">
            <div class="stat-box">
                <div class="stat-number">100%</div>
                <div class="stat-label">Autom√°tico</div>
            </div>
            <div class="stat-box">
                <div class="stat-number">30 min</div>
                <div class="stat-label">Despu√©s de Finalizar</div>
            </div>
            <div class="stat-box">
                <div class="stat-number">15 min</div>
                <div class="stat-label">Frecuencia de Revisi√≥n</div>
            </div>
            <div class="stat-box">
                <div class="stat-number">0</div>
                <div class="stat-label">Intervenci√≥n Manual</div>
            </div>
        </div>
        
        <div class="grid">
            <div class="card">
                <h2>üì¶ Componentes</h2>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>
                        <strong>Motor de Generaci√≥n</strong><br>
                        generar_constancias_automaticas.php
                    </div>
                </div>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>
                        <strong>Endpoint Web</strong><br>
                        ejecutar_generacion_constancias.php
                    </div>
                </div>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>
                        <strong>Scripts PowerShell</strong><br>
                        Configuraci√≥n y ejecuci√≥n
                    </div>
                </div>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>
                        <strong>Windows Task Scheduler</strong><br>
                        Ejecuci√≥n autom√°tica peri√≥dica
                    </div>
                </div>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>
                        <strong>Sistema de Logs</strong><br>
                        Registro detallado de operaciones
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h2>‚öôÔ∏è Caracter√≠sticas</h2>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>Generaci√≥n 100% autom√°tica</div>
                </div>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>PDFs con QR code √∫nico</div>
                </div>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>Validaci√≥n anti-duplicados</div>
                </div>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>Logs diarios detallados</div>
                </div>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>Verificaci√≥n de asistencia completa</div>
                </div>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>Formato profesional (A4 horizontal)</div>
                </div>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>Archivos temporales auto-eliminados</div>
                </div>
            </div>
            
            <div class="card">
                <h2>üöÄ Inicio R√°pido</h2>
                <div class="code-block">
<span class="comment"># 1. Probar sistema</span>
<span class="command">.\probar-generacion-automatica.ps1</span>

<span class="comment"># 2. Configurar tarea autom√°tica</span>
<span class="command">.\configurar-tarea-constancias.ps1</span>

<span class="comment"># 3. Verificar</span>
<span class="command">Get-ScheduledTask -TaskName "Generar_Constancias_Automaticas"</span>
                </div>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="alert('Ejecutar: .\\probar-generacion-automatica.ps1')">
                        Probar Sistema
                    </button>
                    <button class="btn btn-success" onclick="alert('Ejecutar: .\\configurar-tarea-constancias.ps1')">
                        Configurar Tarea
                    </button>
                </div>
            </div>
        </div>
        
        <div class="grid">
            <div class="card">
                <h2>üìä Criterios de Generaci√≥n</h2>
                <div class="feature">
                    <span class="feature-icon">1</span>
                    <div><code>hora_fin &lt; SYSDATE - 30 min</code></div>
                </div>
                <div class="feature">
                    <span class="feature-icon">2</span>
                    <div><code>genera_constancia = 1</code></div>
                </div>
                <div class="feature">
                    <span class="feature-icon">3</span>
                    <div><code>hora_entrada IS NOT NULL</code></div>
                </div>
                <div class="feature">
                    <span class="feature-icon">4</span>
                    <div><code>hora_salida IS NOT NULL</code></div>
                </div>
                <div class="feature">
                    <span class="feature-icon">5</span>
                    <div><code>Sin constancia previa</code></div>
                </div>
            </div>
            
            <div class="card">
                <h2>üìù Contenido del PDF</h2>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>Nombre completo (3 ubicaciones)</div>
                </div>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>Matr√≠cula (3 ubicaciones)</div>
                </div>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>QR code con datos completos</div>
                </div>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>C√≥digo QR visible en texto</div>
                </div>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>Informaci√≥n del evento</div>
                </div>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>Ponente y fecha</div>
                </div>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>Duraci√≥n en horas</div>
                </div>
                <div class="feature">
                    <span class="feature-icon">‚úì</span>
                    <div>Hash SHA256 para verificaci√≥n</div>
                </div>
            </div>
            
            <div class="card">
                <h2>üîç Monitoreo</h2>
                <div class="example-output">
[14:45:00] === INICIO ===
[14:45:01] Eventos: 2
[14:45:02] Usuarios: 42
[14:45:03] ‚úì Juan P√©rez (A12345)
[14:45:04] ‚úì Mar√≠a L√≥pez (A12346)
...
[14:46:15] === RESUMEN ===
[14:46:15] Generadas: 42
[14:46:15] Errores: 0
                </div>
                <div class="button-group">
                    <button class="btn btn-secondary" onclick="alert('Get-Content logs\\constancias_auto_' + new Date().toISOString().split(\'T\')[0] + '.log')">
                        Ver Log
                    </button>
                </div>
            </div>
        </div>
        
        <div class="alert alert-info">
            <strong>üí° Documentaci√≥n Completa:</strong><br>
            üìñ <strong>GENERACION_AUTOMATICA_CONSTANCIAS.md</strong> - Gu√≠a t√©cnica completa<br>
            üöÄ <strong>INICIO_RAPIDO_CONSTANCIAS_AUTO.md</strong> - Gu√≠a de inicio r√°pido<br>
            üìã <strong>RESUMEN_CONSTANCIAS_AUTOMATICAS.md</strong> - Resumen ejecutivo
        </div>
        
        <div class="card">
            <h2>üéØ Ejemplo Pr√°ctico</h2>
            <div class="code-block">
<span class="comment"># Evento: "Taller de Marketing Digital"</span>
<span class="comment"># Inicio: 10:00 hrs</span>
<span class="comment"># Fin: 14:00 hrs</span>
<span class="comment"># Inscritos: 50 alumnos</span>

<span class="string">14:00</span> - Evento finaliza
<span class="string">14:30</span> - Sistema espera 30 minutos
<span class="string">14:45</span> - Tarea programada ejecuta (cada 15 min)
<span class="string">14:45</span> - Detecta evento finalizado
<span class="string">14:45</span> - Busca usuarios con asistencia completa
<span class="string">14:45</span> - Encuentra 42 usuarios elegibles
<span class="string">14:46</span> - Genera 42 PDFs autom√°ticamente
<span class="string">14:46</span> - Constancias disponibles para descarga

<span class="comment"># Sin intervenci√≥n manual requerida</span>
            </div>
        </div>
        
        <footer>
            <p><strong>Sistema de Gesti√≥n - Congreso de Mercadotecnia</strong></p>
            <p>Universidad Aut√≥noma de Aguascalientes</p>
            <p style="margin-top: 10px; color: #10b981; font-weight: bold;">
                ‚úÖ Sistema Implementado y Operacional - Noviembre 2025
            </p>
        </footer>
    </div>
</body>
</html>
