# Gu√≠a de Migraci√≥n a Oracle Database 23ai Free

Esta gu√≠a documenta el proceso de migraci√≥n del Sistema de Gesti√≥n del Congreso de Mercadotecnia de MySQL 8.0 a Oracle Database 23ai Free.

## üìã Archivos Creados

### Archivos de Configuraci√≥n Docker
- ‚úÖ `docker-compose.oracle.yml` - Configuraci√≥n de servicios (Oracle DB, Web, Adminer)
- ‚úÖ `Dockerfile.oracle` - Imagen PHP con extensiones Oracle (OCI8, PDO_OCI)
- ‚úÖ `.env.oracle` - Variables de entorno

### Scripts SQL de Inicializaci√≥n
- ‚úÖ `oracle/init/01_create_user.sql` - Crear usuario y tablespace
- ‚úÖ `oracle/init/02_create_schema.sql` - Crear esquema de base de datos
- ‚úÖ `oracle/README.md` - Documentaci√≥n de scripts

## üöÄ C√≥mo Usar

### 1. Levantar los Servicios

```powershell
# Construir e iniciar los contenedores
docker-compose -f docker-compose.oracle.yml up -d --build

# Ver logs en tiempo real
docker-compose -f docker-compose.oracle.yml logs -f

# Verificar que los contenedores est√°n corriendo
docker-compose -f docker-compose.oracle.yml ps
```

### 2. Esperar a que Oracle se Inicialice

El primer inicio puede tardar **3-5 minutos** mientras Oracle:
- Configura la base de datos
- Ejecuta los scripts de inicializaci√≥n
- Crea el usuario y las tablas

Monitorear el progreso:
```powershell
docker logs -f congreso_oracle_db
```

Busca el mensaje: `DATABASE IS READY TO USE!`

### 3. Verificar la Conexi√≥n

```powershell
# Conectarse a SQL*Plus
docker exec -it congreso_oracle_db sqlplus congreso_user/congreso_pass@FREEPDB1

# Verificar tablas creadas
SELECT table_name FROM user_tables ORDER BY table_name;

# Salir de SQL*Plus
EXIT;
```

### 4. Acceder a la Aplicaci√≥n Web

- **Aplicaci√≥n**: http://localhost:8080
- **Adminer (Gesti√≥n DB)**: http://localhost:8081
  - Sistema: Oracle
  - Servidor: oracle_db:1521/FREEPDB1
  - Usuario: congreso_user
  - Contrase√±a: congreso_pass

## üîß Comandos √ötiles

### Gesti√≥n de Contenedores

```powershell
# Detener servicios
docker-compose -f docker-compose.oracle.yml down

# Detener y eliminar vol√∫menes (reiniciar BD desde cero)
docker-compose -f docker-compose.oracle.yml down -v

# Reconstruir imagen web
docker-compose -f docker-compose.oracle.yml build web

# Ver uso de recursos
docker stats congreso_oracle_db congreso_web_oracle
```

### Gesti√≥n de Base de Datos

```powershell
# Conectarse como SYSDBA
docker exec -it congreso_oracle_db sqlplus sys/OraclePass123!@FREEPDB1 as sysdba

# Backup de la base de datos
docker exec congreso_oracle_db expdp congreso_user/congreso_pass@FREEPDB1 directory=DATA_PUMP_DIR dumpfile=backup.dmp

# Ver espacio usado
docker exec -it congreso_oracle_db sqlplus congreso_user/congreso_pass@FREEPDB1 <<EOF
SELECT tablespace_name, SUM(bytes)/1024/1024 MB FROM user_segments GROUP BY tablespace_name;
EXIT;
EOF
```

## üìä Diferencias Clave MySQL vs Oracle

### Tipos de Datos
- `INT` ‚Üí `NUMBER`
- `TINYINT(1)` ‚Üí `NUMBER(1)` (para booleanos)
- `VARCHAR` ‚Üí `VARCHAR2`
- `TEXT` ‚Üí `CLOB`
- `DATETIME` ‚Üí `TIMESTAMP`
- `TIME` ‚Üí `INTERVAL` o `TIMESTAMP`

### Auto-incremento
- MySQL: `AUTO_INCREMENT`
- Oracle: `GENERATED BY DEFAULT ON NULL AS IDENTITY`

### Funciones
- `NOW()` ‚Üí `CURRENT_TIMESTAMP`
- `CONCAT()` ‚Üí `||` o `CONCAT()`
- `LIMIT n` ‚Üí `FETCH FIRST n ROWS ONLY`
- `DATE_FORMAT()` ‚Üí `TO_CHAR()`

### Sintaxis
- Terminadores: `;` para SQL, `/` para PL/SQL
- Case sensitivity: Oracle convierte a may√∫sculas por defecto
- Strings: Solo comillas simples `'texto'`

## ‚ö†Ô∏è Notas Importantes

1. **Primer Inicio**: Puede tardar varios minutos
2. **Recursos**: Oracle requiere al menos 2GB RAM
3. **Persistencia**: Los datos se guardan en el volumen `oracle_data`
4. **Puertos**: Aseg√∫rate que 1521, 5500, 8080, 8081 est√©n libres
5. **Scripts Init**: Solo se ejecutan si el volumen est√° vac√≠o

## üêõ Soluci√≥n de Problemas

### Oracle no inicia
```powershell
# Ver logs completos
docker logs congreso_oracle_db

# Verificar recursos disponibles
docker stats

# Reiniciar contenedor
docker restart congreso_oracle_db
```

### Error de conexi√≥n desde PHP
```powershell
# Verificar extensiones Oracle en PHP
docker exec congreso_web_oracle php -m | grep -i oci

# Verificar variables de entorno
docker exec congreso_web_oracle env | grep ORACLE
```

### Reiniciar base de datos desde cero
```powershell
# ADVERTENCIA: Esto borrar√° todos los datos
docker-compose -f docker-compose.oracle.yml down -v
docker volume rm sistema-de-gestion-congreso-de-mercadotecnia_oracle_data
docker-compose -f docker-compose.oracle.yml up -d
```

## üìö Pr√≥ximos Pasos

Despu√©s de verificar que Oracle est√° funcionando correctamente:

1. **Crear archivo de conexi√≥n PHP** (`Proyecto_conectado/php/conexion.oracle.php`)
2. **Adaptar controladores PHP** para usar sintaxis Oracle
3. **Migrar consultas SQL** de MySQL a Oracle
4. **Probar funcionalidades** del sistema
5. **Optimizar rendimiento** con √≠ndices y ajustes

## üîó Recursos √ötiles

- [Oracle Database Free Documentation](https://docs.oracle.com/en/database/oracle/oracle-database/23/index.html)
- [PHP OCI8 Extension](https://www.php.net/manual/en/book.oci8.php)
- [PHP PDO_OCI Driver](https://www.php.net/manual/en/ref.pdo-oci.php)
- [Oracle SQL Developer](https://www.oracle.com/database/sqldeveloper/)

---

**Fecha de Creaci√≥n**: 8 de Noviembre, 2025  
**Versi√≥n**: 1.0
